# Javascript 코드의 해석과 실행 정리

## 개요
`javascript`는 인터프리터에서 `jit compiler` 방식으로 라인단위로 해석해 작동한다.

요약한 이말을 알기 위해서는 해석경로를 알아야 했고 그걸 위해서는 이것이 어떤 특징과 정의를 의미하고 가졌는지에 대해 알아야 했다. 그래서 각각의 정의와 개념을 정리하고 적어 보며 내려갔다.

## 기계어 / 어셈블리어
- 기계어 : 컴퓨터의 머리인 *cpu*는 사람의 언어를 이해하지 못한다. 컴퓨터의 언어로 얘기를 해야 이해를 하는데 컴퓨터의 언어는 0과 1인 '2진수'로 이뤄져 있다.  이걸 2진수의 패턴으로 나열해 cpu에 신호를 보내게 되는데 이것을 *cpu*가 직접 해독하고 실행 할 수 있는 비트단위로 쓰인 컴퓨터 언어를 `기계어` 라고 한다.
- 어셈블리어 : 기계어 코드는 가독성이 낮다는 단점이 있다.  그래서 인간이 프로그래밍을 하기 쉬운 언어의 필요성에 의해 어려운 기계어 명령어에 니모닉기호( 기계어로 된 일련의 숫자를 알아보기 쉬운 단어로 바꾼 것 )를 대응해 좀 더 쉬운 언어를 만드는데 이것을 `어셈블리어` 라고 한다.
- 어셈블러 : 어셈블리어로 작성된 코드는 *cpu*가 이해 할 수 없다.  그래서 그걸 기계어로 바꾸는데 이 작업을 `어셈블러` 라고 한다. 어셈블러는 니모닉기호를 op-code(operation code)로 변환하고 메모리 위치와 기타 존재물에 따라 식별자를 다시 분석해 기계어로 된 목적코드를 만든다. 이것을 링커( 컴파일러가 만들어낸 하나이상의 목적파일을 가져와 단일 실행 프로그램으로 병합하는 프로그램 )가 하나의 실행 프로그램으로 합쳐주고 로더( 오프라인 저장장치에 있는 특정 프로그램을 찾아서 주기억장치에 적재하고 그 프로그램이 실행되도록 하는 역할 )가 프로그램을 주기억 장치에 적재하여 실행한다

## 저급 프로그래밍 언어 / 고급 프로그래밍 언어
- 저급 프로그래밍 언어 : 기계어나 어셈블리어 처럼 컴퓨터 내부에 처리 가능한 언어를 뜻한다. 문법의 추상화 수준이 기계어에 가깝다는 의미인 저급은 아주 빠르고 강력하다는 장점이 있지만 인간이 너무 상세한 부분까지 책임져 사용하기 때문에 사용이 어렵다는 단점이 있다.  또한 일일히 다른 *cpu* 아키텍처가 등장 시 똑같은 프로그램을 다른 어셈블리어로 작성하는 비용이 생긴다는 점도 문제다.
- 고급 프로그래밍 언어 : 저급 프로그래밍 언어의 문제점에 의해 만들어진 언어들이다.  c, java 등이 이에 속한다. '고급'은 '저급'에 비해 자연어에 가까운 문법을 갖고 있으며 원시 소스코드를 저급으로 번역함으로써 특정 컴퓨터 하드웨어 구조에 좌우되지 않는 프로그램을 작성할 수 있다. '고급' => '저급' 으로 번역하는 방식은 2가지로 나뉘는데 '컴파일러 방식' 과 '인터프리터 방식' 으로 나뉜다.
  - 컴파일러 방식 : 특정 프로그래밍 언어로 작성한 소스코드를 다른 프로그래밍 언어로 변환하는 프로그램이다. 이 방식은 목적프로그램을 만들고 이 목적프로그램을 실행하는 명령을 지시해 실행한다. ex) c, c++
  - 인터프리터 방식 : 위에 방식과는 다르게 소스프로그램을 컴파일하여 목적프로그램을 생성하지 않고 라인단위로 해석하면서 바로 실행한다. 별도의 컴파일 과정없이 프로그램을 수행 할 수 있으나 런타임 코드를 해석해야 해서 속도가 느리다. ex) javascript

## 인터프리터의 종류
- 컴파일러 + 인터프리터 결합형 : 소스코드를 기계어나 어셈블리어가 아닌 중간 형태로 변환 후 이것을 인터프리터가 읽어들여 메모리에 적재 해석하면서 실행한다. java 컴파일러는 원시코드를 jvm이 해석할 수 있는 bytecode로 변환하여 이를 class 파일에 저장한다 => 그 후 jvm이 class 파일을 메모리에 읽어 들인 후 bytecode를 해석하면서 실행하는 방식으로 작동한다. ex) java
- 소스코드 유지형 : 소스코드를 그대로 메모리에 유지 jit compiler( 성능 향상을 위해 실행 시점에서 원시코드나 중간 코드를 네이티브 코드로 변환 ) 방식으로 라인단위로 해석해 실시한다.

## jit compiler
- 프로그램을 실제 실행하는 시점에서 기계어로 번역하는 방식으로 종류는 'method jit'방식과 'tracing jit'로 나뉜다.
- method jit : method 단위로 기계어 코드가 변환되는 방식.
- tracing jit : 인터프리터가 코드를 실행하다가 자주 실행되는 부분만 tracing 하여 기계어 코드로 변환되는 방식.  tracing jit는 프로그램이 일부 루프안에서 대부분 시간을 소비하며, 반복루프는 유사한 경로를 갖는다고 가정한다.  코드를 실행하는 중간에 기록(trace)를 해두었다가 자주 실행되는 부분으로 판단시 기계어로 변환되어 실행한다.  모든 코드가 기계어로 변환되지 않기도 하지만 인터프리터와 기계어 사이를 왔다갔다 해야하는 비용의 단점을 갖고 있다.

## 참고 자료

- http://huns.me/development/360
- https://ko.wikipedia.org/wiki/%ec%96%b4%ec%85%88%eb%b8%94%eb%a6%ac%ec%96%b4
- https://ko.wikipedia.org/wiki/%eb%a7%81%ec%bb%a4_(%ec%bb%b4%ed%93%a8%ed%8c%85)
- https://ko.wikipedia.org/wiki/%eb%a1%9c%eb%8d%94_(%ec%bb%b4%ed%93%a8%ed%8c%85)
- https://ko.wikipedia.org/wiki/%ea%b8%b0%ea%b3%84%ec%96%b4
- https://en.wikipedia.org/wiki/opcode
- https://ko.wikipedia.org/wiki/jit_%ec%bb%b4%ed%8c%8c%ec%9d%bc